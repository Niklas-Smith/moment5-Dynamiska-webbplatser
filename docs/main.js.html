<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: main.js</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: main.js</h1>

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>/**
 *  Empty array that will store data from miun
 * @type {Array}
 */
 let admission = [];
/**
 * 
 * Call function getAdmissinInfo when page is load
 * @function getAdmissinInfo
 * 
 */
 
 window.onload = () => {
    
getAdmissionInfo()

    }
 
/**
 * Fetch data from miun
 * and put this data in empty array admission in json format
 * @async
 * @function getomdbInfo
 * @throws {Error} if response not ok
 * 
*/
 
 async function getAdmissionInfo()  {
try {

const resp = await fetch ("https://studenter.miun.se/~mallar/dt211g/")


if(!resp.ok) {
 throw new error("Kan ej läsa in")
    
 }

admission = await resp.json();


WriteDiagram()


 }catch(error) {
 console.error(error); }
 

 
 
}



/**
 * Use filter() so to seperate courses and program and use slice()&lt;br>
 * To keep six higest from courses and five higest from program &lt;br>
 * Then use sort to have both them go from higest to lowest (six higest from courses and five higest rom program) &lt;br>
 * @function WriteDiagram
 * @returns {chart} input data from below (courses and program) in two diffrent charts (one bar and one pie) &lt;br>  first chart show higest applicant for courses  secend Chart show  higest applicant for program
 */

function WriteDiagram() {
let applicant = admission


const courses = applicant.filter(applicant => applicant.type === "Kurs").sort((a,b) => b.applicantsTotal-a.applicantsTotal).slice(0,6);
const program = applicant.filter(applicant => applicant.type === "Program").sort((a,b) => b.applicantsTotal-a.applicantsTotal).slice(0,5);




let coursesApplicantTotal = courses.sort((a,b) => b.applicantsTotal-a.applicantsTotal)

let  programApplicantTotal =  program.sort((a,b) => b.applicantsTotal-a.applicantsTotal)




 
 const ctx = document.getElementById('myChart');


  new Chart(ctx, {
    type: 'bar',
    data: {
              labels: courses.map(courses => courses.name),
      datasets: [{
        label: 'Antal sökande',
       data: coursesApplicantTotal.map(coursesApplicantTotal => coursesApplicantTotal.applicantsTotal),

        borderWidth: 1

      }]
    },

  });



 const ctx2 = document.getElementById('myChartCircle');


  new Chart(ctx2, {
    type: 'pie',
    data: {
              labels: program.map(program => program.name),
      datasets: [{
        label: 'Antal sökande',
       data: programApplicantTotal.map(programApplicantTotal => programApplicantTotal.applicantsTotal),

        borderWidth: 1

      }]
    },

  });





}




</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Global</h3><ul><li><a href="global.html#WriteDiagram">WriteDiagram</a></li><li><a href="global.html#admission">admission</a></li><li><a href="global.html#getAdmissinInfo">getAdmissinInfo</a></li><li><a href="global.html#getMapInfo">getMapInfo</a></li><li><a href="global.html#getomdbInfo">getomdbInfo</a></li><li><a href="global.html#map">map</a></li><li><a href="global.html#mapInfo">mapInfo</a></li><li><a href="global.html#searchMap">searchMap</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc/jsdoc">JSDoc 4.0.4</a> on Sun Jun 08 2025 15:41:34 GMT+0200 (centraleuropeisk sommartid)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
